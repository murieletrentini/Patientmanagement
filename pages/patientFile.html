<div ng-controller="PatientFileController as file" class="container-content">

    <tabset class="tabs">
        <tab heading="Patientenmappe">
            <div class="container">
                <div class="row">
                    <div class="col-md-2">
                        <label>ID</label>
                    </div>
                    <div class="col-md-10">
                        <input ng-keypress="file.findPatient($event,file.patient.id)" ng-model="file.patient.id"
                               type="number"
                               class="form-control id" autofocus>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-2">
                        <label>Name</label>
                    </div>
                    <div class="col-md-10">
                        <input class="form-control" type="text"
                               value="{{file.patient.surname}} {{file.patient.name}}"
                               disabled>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-2">
                        <label>Blutgruppe</label>
                    </div>
                    <div class="col-md-10">
                        <input class="form-control" type="text"
                               value="{{file.patient.bloodType}} {{file.patient.rhesus}}"
                               disabled>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-2">
                        <label>Antikörper</label>
                    </div>
                    <div class="col-md-10">
                        <input class="form-control" type="text" value="{{file.patient.antiBodyString}}" disabled>
                    </div>
                </div>
            </div>
        </tab>
        <button ng-click="file.createNewCase()" class="btn btn-default">+</button>
        <tab ng-repeat="(key, case) in file.patient.cases" heading="{{case.date | date: 'dd.mm.yyyy'}} | Nr: {{case.nr}}">
            <label>Fallnummer</label> {{case.nr}}
            <span  ng-click="file.removeCase(case.nr)" style="cursor: pointer" class="glyphicon glyphicon-remove"> <i>Fall löschen</i></span>
            <ui-select ng-model="case.analysis" multiple>
                <ui-select-match placeholder="Analysen hinzufügen">{{$item.label}}</ui-select-match>
                <ui-select-choices repeat="analysis in file.availableAnalysis | filter: $select.search">
                    <div>{{analysis.label}}</div>
                </ui-select-choices>
            </ui-select>
            <br>
            <button class="btn btn-default" ng-click="file.saveCase()">Speichern</button>
            <br>
            <div ng-repeat="analysis in case.analysis">
                <p>{{analysis.label}}</p>
            </div>
        </tab>
    </tabset>

    <hr/>





    <br>


    <script type="text/javascript" src="../src/app.js"></script>
    <script type="text/javascript" src="../src/RefDataStore.js"></script>
    <script type="text/javascript" src="../src/PatientStore.js"></script>
    <script type="text/javascript" src="../src/PatientFileController.js"></script>
    <script type="text/javascript" src="../src/ModalController.js"></script>


</div>